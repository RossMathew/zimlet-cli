{"version":3,"sources":["../src/cli.js"],"names":["command","port","type","description","defaultDescription","https","default","argv","watch","runCli","dest","production","name","alias","demandOption","requiresArg","builddir","package","demandCommand","usage","help","err","result","process","stderr","write","stdout","setTimeout","exit"],"mappings":";;AAEA;;;;AACA;;;;;;AAEA,gBACEA,OADF,CACU,OADV,EACmB,4BADnB,EACiD;AAC/CC,OAAM;AACLC,QAAM,QADD;AAELC,eAAa,oBAFR;AAGLC,sBAAoB;AAHf,EADyC;AAM/CC,QAAO;AACNH,QAAM,SADA;AAENI,WAAS,IAFH;AAGNH,eAAa;AAHP;AANwC,CADjD,EAaC,UAACI,IAAD,EAAU;AACTA,MAAKC,KAAL,GAAa,IAAb;AACAC,QAAOF,IAAP;AACA,CAhBF,EAiBEP,OAjBF,CAiBU,CAAC,OAAD,CAjBV,EAiBqB,kBAjBrB,EAiByC;AACvCU,OAAM;AACLR,QAAM,QADD;AAELE,sBAAoB,SAFf;AAGLD,eAAa;AAHR;AADiC,CAjBzC,EAuBI,UAACI,IAAD,EAAW;AACbA,MAAKI,UAAL,GAAkB,IAAlB;AACAF,QAAOF,IAAP;AACA,CA1BF,EA2BEP,OA3BF,CA2BU,CAAC,SAAD,CA3BV,EA2BuB,iCA3BvB,EA2B0D;AACxDY,OAAM;AACLC,SAAO,GADF;AAELX,QAAM,QAFD;AAGLC,eAAa,0EAHR;AAILW,gBAAc,IAJT;AAKLC,eAAa;AALR,EADkD;AAQxD,gBAAe;AACdF,SAAO,GADO;AAEdX,QAAM,QAFQ;AAGdC,eAAa,uCAHC;AAIdW,gBAAc,IAJA;AAKdC,eAAa;AALC,EARyC;AAexDZ,cAAa;AACZU,SAAO,MADK;AAEZX,QAAM,QAFM;AAGZC,eAAa,6BAHD;AAIZW,gBAAc,IAJF;AAKZC,eAAa;AALD,EAf2C;AAsBxDC,WAAU;AACTH,SAAO,GADE;AAETX,QAAM,QAFG;AAGTE,sBAAoB,SAHX;AAITD,eAAa;AAJJ,EAtB8C;AA4BxDO,OAAM;AACLG,SAAO,GADF;AAELX,QAAM,QAFD;AAGLE,sBAAoB,OAHf;AAILD,eAAa;AAJR;AA5BkD,CA3B1D,EA6DI,UAACI,IAAD,EAAW;AACbA,MAAKU,OAAL,GAAe,IAAf;AACAR,QAAOF,IAAP;AACA,CAhEF,EAiEEW,aAjEF,CAiEgB,CAjEhB,EAiEmB,6BAjEnB,EAkEEC,KAlEF,CAkEQ,mIAlER,EAmEEC,IAnEF,GAoEEb,IApEF;;AAsEA,SAASE,MAAT,CAAgBF,IAAhB,EAAsB;AACrB,sBAAIA,IAAJ,EAAU,UAACc,GAAD,EAAMC,MAAN,EAAiB;AAC1B,MAAID,GAAJ,EAASE,QAAQC,MAAR,CAAeC,KAAf,CAAqBJ,GAArB,EAAT,KACK,IAAIC,MAAJ,EAAYC,QAAQG,MAAR,CAAeD,KAAf,CAAqBH,MAArB;AACjBK,aAAY,YAAM;AACjBJ,WAAQK,IAAR,CAAaP,MAAM,CAAN,GAAU,CAAvB;AACA,GAFD,EAEG,EAFH;AAGA,EAND;AAOA","file":"cli.js","sourcesContent":["\n\nimport yargs from 'yargs';\nimport run from './index';\n\nyargs\n\t.command('watch', 'Start a development server', {\n\t\tport: {\n\t\t\ttype: 'number',\n\t\t\tdescription: 'Port of dev server',\n\t\t\tdefaultDescription: 8081\n\t\t},\n\t\thttps: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t\tdescription: 'Protocol of dev server. https if true, http if false'\n\t\t}\n\t},\n\t(argv) => {\n\t\targv.watch = true;\n\t\trunCli(argv);\n\t})\n\t.command(['build'], 'Compile a zimlet', {\n\t\tdest: {\n\t\t\ttype: 'string',\n\t\t\tdefaultDescription: './build',\n\t\t\tdescription: 'Directory for build artifacts'\n\t\t}\n\t}, (argv ) => {\n\t\targv.production = true;\n\t\trunCli(argv);\n\t})\n\t.command(['package'], 'Package a zimlet for deployment', {\n\t\tname: {\n\t\t\talias: 'n',\n\t\t\ttype: 'string',\n\t\t\tdescription: 'Globally unique name for your zimlet, e.g. \"com_mycompany_examplezimlet\"',\n\t\t\tdemandOption: true,\n\t\t\trequiresArg: true\n\t\t},\n\t\t'pkg-version': {\n\t\t\talias: 'v',\n\t\t\ttype: 'string',\n\t\t\tdescription: 'Version for your zimlet, e.g. \"1.0.1\"',\n\t\t\tdemandOption: true,\n\t\t\trequiresArg: true\n\t\t},\n\t\tdescription: {\n\t\t\talias: 'desc',\n\t\t\ttype: 'string',\n\t\t\tdescription: 'Description for your zimlet',\n\t\t\tdemandOption: true,\n\t\t\trequiresArg: true\n\t\t},\n\t\tbuilddir: {\n\t\t\talias: 'b',\n\t\t\ttype: 'string',\n\t\t\tdefaultDescription: './build',\n\t\t\tdescription: 'Source directory of built artifacts to publish'\n\t\t},\n\t\tdest: {\n\t\t\talias: 'd',\n\t\t\ttype: 'string',\n\t\t\tdefaultDescription: './pkg',\n\t\t\tdescription: 'Directory for packaged artifacts'\n\t\t}\n\t}, (argv ) => {\n\t\targv.package = true;\n\t\trunCli(argv);\n\t})\n\t.demandCommand(1, 'A command must be specified')\n\t.usage('Zimlet client tool for developing and building Zimlets.\\n\\nType \"zimlet [commmand] --help\" for command specific usage information')\n\t.help()\n\t.argv;\n\nfunction runCli(argv) {\n\trun(argv, (err, result) => {\n\t\tif (err) process.stderr.write(err);\n\t\telse if (result) process.stdout.write(result);\n\t\tsetTimeout( () => {\n\t\t\tprocess.exit(err ? 1 : 0);\n\t\t}, 10);\n\t});\n}\n"]}